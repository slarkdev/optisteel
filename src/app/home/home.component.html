<div class="container">
  <!-- Barra lateral fija -->
  <mat-drawer-container autosize>
    <mat-drawer
      #drawer
      class="ancho-sidenav"
      [mode]="drawerMode"
      [opened]="drawerOpened"
      position="start"
    >
      <aside class="sidebar" aria-label="Navegación">
        <div class="dot" title="OPTISTEEL">A</div>
        <button class="navbtn" title="Proyectos" [routerLink]="['./proyectos']">
          📁
        </button>
        <button class="navbtn" title="Datos" [routerLink]="['./datos']">
          📄
        </button>
        <button
          class="navbtn"
          title="Inventario"
          [routerLink]="['./inventario']"
        >
          📦
        </button>
        <button
          class="navbtn"
          title="Configuración"
          [routerLink]="['./configuracion']"
        >
          ⚙️
        </button>
        <div class="spacer"></div>
        <button class="navbtn" title="Ayuda" [routerLink]="['./ayuda']">
          ❔
        </button>
        <button class="navbtn" title="Salir" (click)="logout()">🔚</button>
      </aside>
    </mat-drawer>

    <div class="container">
      <!-- Toolbar horizontal -->
      <div class="topbar">
        <div class="topbar-inner">
          <div class="ctx">
            <div class="pill">
              <span class="k">Proyecto</span>
              <select
                aria-label="Cambiar proyecto"
                [(ngModel)]="proyectoSeleccionado"
                (change)="buscarLotesPorProyecto()"
                [disabled]="proyectoDeshabilitado"
              >
                <option *ngFor="let proyecto of proyectos" [ngValue]="proyecto">
                  {{ proyecto.name }}
                </option>
              </select>

              <i class="material-icons spin" *ngIf="isLoadingProyecto">autorenew</i>
            </div>

            <div class="pill">
              <span class="k">Lote</span>
              <select
                aria-label="Cambiar lote"
                [(ngModel)]="loteSeleccionado"
                (change)="buscarInventarioPorLote()"
                [disabled]="loteDeshabilitado"
              >
                <option *ngFor="let lote of lotes" [ngValue]="lote">
                  {{ lote.NombreTrabajo }}
                </option>
              </select>

              <i class="material-icons spin" *ngIf="isLoadingLote"  style="font-size: 20px;">autorenew</i>
            </div>
          </div>

          <span class="spacer"></span>
          <span class="hint"
            >Gestiona proyectos del proyecto seleccionado.</span
          >

          <button
            *ngIf="drawerMode === 'over'"
            mat-icon-button
            (click)="drawer.toggle()"
          >
            <mat-icon>menu</mat-icon>
          </button>

          <!-- <button matIconButton [matMenuTriggerFor]="menuUser">
            <mat-icon>account_circle</mat-icon>
          </button>

          <mat-menu #menuUser="matMenu">
            <button mat-menu-item (click)="logout()">
              <mat-icon>exit_to_app</mat-icon>
              <span>Cerrar Sesión</span>
            </button>
          </mat-menu> -->
        </div>
      </div>

      <!-- Contenido debajo del toolbar -->
      <main class="main">
        <router-outlet
          (activate)="drawerMode === 'over' ? drawer.close() : null"
        ></router-outlet>
      </main>
    </div>
  </mat-drawer-container>
</div>

<!-- <div class="container">
  <mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer class="ancho-sidenav" mode="side" opened>
      <aside class="sidebar" aria-label="Navegación">
        <div class="dot" title="OPTISTEEL">A</div>
        <button class="navbtn" title="Proyectos">📁</button>
        <button class="navbtn" title="Datos">📄</button>
        <button class="navbtn" title="Inventario">📦</button>
        <button class="navbtn" title="Configuración">⚙️</button>
        <div class="spacer"></div>
        <button class="navbtn" title="Ayuda">❔</button>
      </aside>
    </mat-drawer>

    <div>
      <router-outlet></router-outlet>
    </div>
  </mat-drawer-container>
</div> -->
